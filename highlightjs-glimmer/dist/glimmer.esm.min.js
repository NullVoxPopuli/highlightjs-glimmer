function i(n){function t(){return{name:"Ember.JS, Glimmer",aliases:["glimmer","hbs","html.hbs","html.handlebars","htmlbars"],case_insensitive:!0,keywords:g,disableAutodetect:!0,contains:[n.COMMENT(/\{\{!--/,/--\}\}/),n.COMMENT(/\{\{!/,/\}\}/),n.COMMENT(/<!--/,/-->/),N,...d,l,m,A,...H]}}let e="eq neq",s="gt gte le lte",o="and or not",c="not-eq xor is-array is-object is-equal",r="let each each-in if else unless",u="log debugger",h="has-block concat fn component helper modifier get hash query-params",P="action on",C="outlet yield",x="true false undefined null",g={$pattern:/\b[\w][\w-]+\b/,keyword:`${C} ${P} ${u}`,built_in:r,function:`${c} ${h} ${e} ${s} ${o}`,literal:x},M=a.either(a.concat(/[a-zA-Z_]/,a.optional(/[A-Z0-9:_.-]*:/),/[A-Z0-9_.-]*/),/[a-z]/),_=/[A-Z][A-Za-z0-9]+/,y=a.either(_,/[a-zA-Z0-9]*\.[a-zA-Z0-9-]*/,a.concat(_,/::/,/-?/,_),/[a-z]/),G=/[a-z-][a-z\d-_]+\b/,k=/[@A-Za-z0-9._:-]+/,N={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},U={className:"punctuation",match:a.either(/\./,/\{\{\{?#?\/?/,/\}\}\}?/,/\(/,/\)/,/::/,/\|/,/~/)},p={begin:/as\s+\|/,keywords:{keyword:"as"},end:/\|/,contains:[{className:"template-variable",begin:k}]},l={className:"operator",match:/=/},m={className:{1:"punctuation",2:"params"},match:[/@/,/[\w\d-_]+/]},b={className:{1:"attribute",2:"operator"},match:[/[A-Za-z0-9-_]+/,/=/]},T={className:{1:"class",2:"punctuation",3:"property"},match:[/this/,/\./,/[^\s}]+/]},f={className:"title",match:y},w={className:"title",match:G,keywords:g},B={className:"number",match:/[\d]+((\.[\d]+))?/},A={className:"comment",begin:/\{\{!--/,contains:[{className:"comment",match:/.+/},{begin:/--\}\}/,endsParent:!0}]},E={className:"string",variants:[{begin:/"/,end:/"/,contains:[N]},{begin:/'/,end:/'/,contains:[N]}]},S=[U,l,m,B,p,T,b,w,E],R={keywords:g,begin:a.concat(/\(/,a.lookahead(a.concat(/\)/))),end:/\)/,contains:[...S,"self",{begin:/\)/,endsParent:!0}]};S.push(R);let d=[{className:"punctuation mustache",keywords:g,begin:a.concat(/\{\{\{?#?/),end:/\}\}\}?/,contains:[{begin:/\}\}\}?/,endsParent:!0},...S,R]}];E.variants.forEach(z=>z.contains.push(...d));let H=[{className:"tag",begin:a.concat(/<:?/,a.lookahead(a.concat("style",a.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[l,m,A,p,T,...d,b,E,f],starts:{className:"tag",end:/<\/style>/,returnEnd:!0,excludeEnd:!1,subLanguage:["css","glimmer"]}},{className:"tag",begin:a.concat(/<:?/,a.lookahead(a.concat(M,a.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[l,m,A,p,T,...d,b,E,f]},{className:"tag",begin:a.concat(/<\/:?/,a.lookahead(a.concat(M,/>/))),end:/>/,contains:[f]}];return t()}function v(n){return L("(?=",n,")")}function Z(n){return L("(",n,")?")}function L(...n){return n.map(e=>O(e)).join("")}function $(...n){return"("+n.map(e=>O(e)).join("|")+")"}function O(n){return n?typeof n=="string"?n:n.source:null}var a={lookahead:v,either:$,optional:Z,concat:L};var Q=i;function W(n){X(n),I(n)}function V(n){let t=i(n);return I(n),t}function X(n){return n.registerLanguage("glimmer",i)}function I(n){K(n)}function K(n){let t=n.getLanguage("javascript");if(!t){console.warn("JavaScript grammar not loaded");return}t=t.rawDefinition(n),Y(n,t),q(n,t),D(n,t),n.registerLanguage("javascript",()=>t),n.registerLanguage("glimmer-javascript",()=>t)}function Y(n,t){let e=t.contains.findIndex(c=>(c==null?void 0:c.begin)==="css`"),s=t.contains[e],o=n.inherit(s,{begin:/hbs`/});o.starts.subLanguage="glimmer",t.contains.splice(e,0,o)}function q(n,t){t.contains.flatMap(e=>(e==null?void 0:e.contains)||e).filter(e=>e.subLanguage==="xml").forEach(e=>e.subLanguage="glimmer")}function D(n,t){let e={begin:/<template>/,end:/<\/template>/,isTrulyOpeningTag:(s,o)=>{let c=s[0].length+s.index,r=s.input[c];if(r==="<"||r===","){o.ignoreMatch();return}let u;if((u=s.input.substring(c).match(/^\s+extends\s+/))&&u.index===0){o.ignoreMatch();return}}};t.contains.unshift({variants:[{begin:e.begin,"on:begin":e.isTrulyOpeningTag,end:e.end}],subLanguage:"glimmer",contains:[{begin:e.begin,end:e.end,skip:!0,contains:["self"]}]})}export{V as externalSetup,Q as glimmer,I as registerInjections,X as registerLanguage,W as setup};
