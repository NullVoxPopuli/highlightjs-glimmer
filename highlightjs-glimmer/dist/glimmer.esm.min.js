function r(n){function t(){return{name:"Ember.JS, Glimmer",aliases:["glimmer","hbs","html.hbs","html.handlebars","htmlbars"],case_insensitive:!0,keywords:l,disableAutodetect:!0,contains:[n.COMMENT(/\{\{!--/,/--\}\}/),n.COMMENT(/\{\{!/,/\}\}/),n.COMMENT(/<!--/,/-->/),o,...b,E,d,h,...H]}}let e="eq neq",s="gt gte le lte",i="and or not",c="not-eq xor is-array is-object is-equal",u="let each each-in if else unless",g="log debugger",p="has-block concat fn component helper modifier get hash query-params",P="action on",C="outlet yield",x="true false undefined null",l={$pattern:/\b[\w][\w-]+\b/,keyword:`${C} ${P} ${g}`,built_in:u,function:`${c} ${p} ${e} ${s} ${i}`,literal:x},A=a.either(a.concat(/[a-zA-Z_]/,a.optional(/[A-Z0-9:_.-]*:/),/[A-Z0-9_.-]*/),/[a-z]/),m=/[A-Z][A-Za-z0-9]+/,y=a.either(m,/[a-zA-Z0-9]*\.[a-zA-Z0-9-]*/,a.concat(m,/::/,/-?/,m),/[a-z]/),G=/[a-z-][a-z\d-_]+\b/,k=/[@A-Za-z0-9._:-]+/,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},v={className:"punctuation",match:a.either(/\./,/\{\{\{?#?\/?/,/\}\}\}?/,/\(/,/\)/,/::/,/\|/,/~/)},f={begin:/as\s+\|/,keywords:{keyword:"as"},end:/\|/,contains:[{className:"template-variable",begin:k}]},E={className:"operator",match:/=/},d={className:{1:"punctuation",2:"params"},match:[/@/,/[\w\d-_]+/]},S={className:{1:"attribute",2:"operator"},match:[/[A-Za-z0-9-_]+/,/=/]},L={className:{1:"class",2:"punctuation",3:"property"},match:[/this/,/\./,/[^\s}]+/]},M={className:"title",match:y},w={className:"title",match:G,keywords:l},U={className:"number",match:/[\d]+((\.[\d]+))?/},h={className:"comment",begin:/\{\{!--/,contains:[{className:"comment",match:/.+/},{begin:/--\}\}/,endsParent:!0}]},_={className:"string",variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]}]},N=[v,E,d,U,f,L,S,w,_],R={keywords:l,begin:a.concat(/\(/,a.lookahead(a.concat(/\)/))),end:/\)/,contains:[...N,"self",{begin:/\)/,endsParent:!0}]};N.push(R);let b=[{className:"punctuation mustache",keywords:l,begin:a.concat(/\{\{\{?#?/),end:/\}\}\}?/,contains:[{begin:/\}\}\}?/,endsParent:!0},...N,R]}];_.variants.forEach(z=>z.contains.push(...b));let B=new RegExp("[\\p{L}0-9._:-]+","u"),H=[{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[{endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:B,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]}],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:a.concat(/<:?/,a.lookahead(a.concat(A,a.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[E,d,h,f,L,...b,S,_,M]},{className:"tag",begin:a.concat(/<\/:?/,a.lookahead(a.concat(A,/>/))),end:/>/,contains:[M]}];return t()}function Z(n){return T("(?=",n,")")}function $(n){return T("(",n,")?")}function T(...n){return n.map(e=>O(e)).join("")}function X(...n){return"("+n.map(e=>O(e)).join("|")+")"}function O(n){return n?typeof n=="string"?n:n.source:null}var a={lookahead:Z,either:X,optional:$,concat:T};var V=r;function nn(n){D(n),I(n)}function en(n){let t=r(n);return I(n),t}function D(n){return n.registerLanguage("glimmer",r)}function I(n){K(n)}function K(n){let t=n.getLanguage("javascript");if(!t){console.warn("JavaScript grammar not loaded");return}t=t.rawDefinition(n),Y(n,t),q(n,t),j(n,t),n.registerLanguage("javascript",()=>t),n.registerLanguage("glimmer-javascript",()=>t)}function Y(n,t){let e=t.contains.findIndex(c=>(c==null?void 0:c.begin)==="css`"),s=t.contains[e],i=n.inherit(s,{begin:/hbs`/});i.starts.subLanguage="glimmer",t.contains.splice(e,0,i)}function q(n,t){t.contains.flatMap(e=>(e==null?void 0:e.contains)||e).filter(e=>e.subLanguage==="xml").forEach(e=>e.subLanguage="glimmer")}function j(n,t){let e={begin:/<template>/,end:/<\/template>/,isTrulyOpeningTag:(s,i)=>{let c=s[0].length+s.index,u=s.input[c];if(u==="<"||u===","){i.ignoreMatch();return}let g;if((g=s.input.substring(c).match(/^\s+extends\s+/))&&g.index===0){i.ignoreMatch();return}}};t.contains.unshift({variants:[{begin:e.begin,"on:begin":e.isTrulyOpeningTag,end:e.end}],subLanguage:"glimmer",contains:[{begin:e.begin,end:e.end,skip:!0,contains:["self"]}]})}export{en as externalSetup,V as glimmer,I as registerInjections,D as registerLanguage,nn as setup};
