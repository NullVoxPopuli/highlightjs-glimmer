function r(n){function e(){return{name:"Ember.JS, Glimmer",aliases:["glimmer","hbs","html.hbs","html.handlebars","htmlbars"],case_insensitive:!0,keywords:g,disableAutodetect:!0,contains:[n.COMMENT(/\{\{!--/,/--\}\}/),n.COMMENT(/\{\{!/,/\}\}/),n.COMMENT(/<!--/,/-->/),m,...f,E,_,L,...H]}}let t="eq neq",s="gt gte le lte",i="and or not",o="not-eq xor is-array is-object is-equal",c="let each each-in if else unless",u="log debugger",b="has-block concat fn component helper modifier get hash query-params",P="action on",C="outlet yield",x="true false undefined null",g={$pattern:/\b[\w][\w-]+\b/,keyword:`${C} ${P} ${u}`,built_in:c,function:`${o} ${b} ${t} ${s} ${i}`,literal:x},T=a.either(a.concat(/[a-zA-Z_]/,a.optional(/[A-Z0-9:_.-]*:/),/[A-Z0-9_.-]*/),/[a-z]/),l=/[A-Z][A-Za-z0-9]+/,y=a.either(l,/[a-zA-Z0-9]*\.[a-zA-Z0-9-]*/,a.concat(l,/::/,/-?/,l),/[a-z]/),U=/[a-z-][a-z\d-_]+\b/,k=/[@A-Za-z0-9._:-]+/,m={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},w={className:"punctuation",match:a.either(/\./,/\{\{\{?#?\/?/,/\}\}\}?/,/\(/,/\)/,/::/,/\|/,/~/)},A={begin:/as\s+\|/,keywords:{keyword:"as"},end:/\|/,contains:[{className:"template-variable",begin:k}]},E={className:"operator",match:/\=/},_={className:{1:"punctuation",2:"params"},match:[/@/,/[\w\d-_]+/]},S={className:{1:"attribute",2:"operator"},match:[/[A-Za-z0-9-_]+/,/=/]},M={className:{1:"class",2:"punctuation",3:"property"},match:[/this/,/\./,/[^\s}]+/]},h={className:"title",match:y},B={className:"title",match:U,keywords:g},G={className:"number",match:/[\d]+((\.[\d]+))?/},L={className:"comment",begin:/\{\{!--/,contains:[{className:"comment",match:/.+/},{begin:/--\}\}/,endsParent:!0}]},d={className:"string",variants:[{begin:/"/,end:/"/,contains:[m]},{begin:/'/,end:/'/,contains:[m]}]},N=[w,E,_,G,A,M,S,B,d],R={keywords:g,begin:a.concat(/\(/,a.lookahead(a.concat(/\)/))),end:/\)/,contains:[...N,"self",{begin:/\)/,endsParent:!0}]};N.push(R);let f=[{className:"punctuation mustache",keywords:g,begin:a.concat(/\{\{\{?#?/),end:/\}\}\}?/,contains:[{begin:/\}\}\}?/,endsParent:!0},...N,R]}];d.variants.forEach(z=>z.contains.push(...f));let H=[{className:"tag",begin:a.concat(/<:?/,a.lookahead(a.concat(T,a.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[E,_,L,A,M,...f,S,d,h]},{className:"tag",begin:a.concat(/<\/:?/,a.lookahead(a.concat(T,/>/))),end:/\>/,contains:[h]}];return e()}function v(n){return p("(?=",n,")")}function Z(n){return p("(",n,")?")}function p(...n){return n.map(t=>O(t)).join("")}function $(...n){return"("+n.map(t=>O(t)).join("|")+")"}function O(n){return n?typeof n=="string"?n:n.source:null}var a={lookahead:v,either:$,optional:Z,concat:p};var F=r;function Q(n){X(n),I(n)}function W(n){let e=r(n);return I(n),e}function X(n){return n.registerLanguage("glimmer",r)}function I(n){K(n)}function K(n){let e=n.getLanguage("javascript");if(!e){console.warn("JavaScript grammar not loaded");return}e=e.rawDefinition(n),q(n,e),D(n,e),Y(n,e),n.registerLanguage("javascript",()=>e),n.registerLanguage("glimmer-javascript",()=>e)}function q(n,e){let t=e.contains.findIndex(o=>(o==null?void 0:o.begin)==="css`"),s=e.contains[t],i=n.inherit(s,{begin:/hbs`/});i.starts.subLanguage="glimmer",e.contains.splice(t,0,i)}function D(n,e){e.contains.flatMap(t=>(t==null?void 0:t.contains)||t).filter(t=>t.subLanguage==="xml").forEach(t=>t.subLanguage="glimmer")}function Y(n,e){let t={begin:/<template>/,end:/<\/template>/,isTrulyOpeningTag:(s,i)=>{let o=s[0].length+s.index,c=s.input[o];if(c==="<"||c===","){i.ignoreMatch();return}c===">"&&(hasClosingTag(s,{after:o})||i.ignoreMatch());let u;if((u=s.input.substring(o).match(/^\s+extends\s+/))&&u.index===0){i.ignoreMatch();return}}};e.contains.unshift({variants:[{begin:t.begin,"on:begin":t.isTrulyOpeningTag,end:t.end}],subLanguage:"glimmer",contains:[{begin:t.begin,end:t.end,skip:!0,contains:["self"]}]})}export{W as externalSetup,F as glimmer,I as registerInjections,X as registerLanguage,Q as setup};
